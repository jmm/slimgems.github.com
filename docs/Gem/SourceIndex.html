<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: Gem::SourceIndex
  
    &mdash; Documentation by YARD 0.6.8
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '..';
  if (relpath != '') relpath += '/';
</script>

  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (S)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../Gem.html" title="Gem (module)">Gem</a></span></span>
     &raquo; 
    <span class="title">SourceIndex</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a id="class_list_link" href="#">Class List</a>
  
    <a id="method_list_link" href="#">Method List</a>
  
    <a id="file_list_link" href="#">File List</a>
  
</div>
      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: Gem::SourceIndex
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Gem::SourceIndex</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
      <dt class="r2">Extended by:</dt>
      <dd class="r2"><span class='object_link'><a href="UserInteraction.html" title="Gem::UserInteraction (module)">UserInteraction</a></span></dd>
      
    
  
    
      <dt class="r1">Includes:</dt>
      <dd class="r1">Enumerable, <span class='object_link'><a href="UserInteraction.html" title="Gem::UserInteraction (module)">UserInteraction</a></span></dd>
      
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/rubygems/source_index.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>
The SourceIndex object indexes all the gems available from a particular
source (e.g. a list of gem directories, or a remote source).  A SourceIndex
maps a gem full name to a gem specification.
</p>
<table>
<tr><td valign="top">NOTE</td><td><p>
The class used to be named Cache, but that became confusing when cached
source fetchers where introduced. The constant Gem::Cache is an alias for
this class to allow old YAMLized source index objects to load properly.
</p>
</td></tr>
</table>


  </div>
</div>
<div class="tags">
  
</div>

  
  
  
  
  
  
  
  
  
  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#gems-instance_method" title="#gems (instance method)">- (Object) <strong>gems</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
:nodoc:.
</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#spec_dirs-instance_method" title="#spec_dirs (instance method)">- (Object) <strong>spec_dirs</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Directories to use to refresh this SourceIndex when calling refresh!.
</p>
</div></span>
  
</li>

    
  </ul>



  
  
  
  
  
  
  

  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#from_gems_in-class_method" title="from_gems_in (class method)">+ (Object) <strong>from_gems_in</strong>(*spec_dirs) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Creates a new SourceIndex from the ruby format gem specifications in
<tt>spec_dirs</tt>.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#from_installed_gems-class_method" title="from_installed_gems (class method)">+ (Object) <strong>from_installed_gems</strong>(*deprecated) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Factory method to construct a source index instance for a given path.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#installed_spec_directories-class_method" title="installed_spec_directories (class method)">+ (Object) <strong>installed_spec_directories</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns a list of directories from Gem.path that contain specifications.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#load_specification-class_method" title="load_specification (class method)">+ (Object) <strong>load_specification</strong>(file_name) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Loads a ruby-format specification from <tt>file_name</tt> and returns the
loaded spec.
</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#%3D%3D-instance_method" title="#== (instance method)">- (Object) <strong>==</strong>(other) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
:nodoc:.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_spec-instance_method" title="#add_spec (instance method)">- (Object) <strong>add_spec</strong>(gem_spec, name = gem_spec.full_name) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Add a gem specification to the source index.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_specs-instance_method" title="#add_specs (instance method)">- (Object) <strong>add_specs</strong>(*gem_specs) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Add gem specifications to the source index.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#all_gems-instance_method" title="#all_gems (instance method)">- (Object) <strong>all_gems</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
TODO: remove method.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#dump-instance_method" title="#dump (instance method)">- (Object) <strong>dump</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#each-instance_method" title="#each (instance method)">- (Object) <strong>each</strong>(&amp;block) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Iterate over the specifications in the source index.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find_name-instance_method" title="#find_name (instance method)">- (Object) <strong>find_name</strong>(gem_name, version_requirement = Gem::Requirement.default) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Find a gem by an exact match on the short name.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#gem_signature-instance_method" title="#gem_signature (instance method)">- (Object) <strong>gem_signature</strong>(gem_full_name) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
The signature for the given gem specification.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#index_signature-instance_method" title="#index_signature (instance method)">- (Object) <strong>index_signature</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
The signature for the source index.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (SourceIndex) <strong>initialize</strong>(specifications = {}) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Constructs a source index instance from the provided specifications, which
is a Hash of gem full names and Gem::Specifications.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#latest_specs-instance_method" title="#latest_specs (instance method)">- (Object) <strong>latest_specs</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns an Array specifications for the latest released versions of each
gem in this index.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#load_gems_in-instance_method" title="#load_gems_in (instance method)">- (Object) <strong>load_gems_in</strong>(*spec_dirs) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Reconstruct the source index from the specifications in <tt>spec_dirs</tt>.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#outdated-instance_method" title="#outdated (instance method)">- (Object) <strong>outdated</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns an Array of Gem::Specifications that are not up to date.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#prerelease_gems-instance_method" title="#prerelease_gems (instance method)">- (Object) <strong>prerelease_gems</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#prerelease_specs-instance_method" title="#prerelease_specs (instance method)">- (Object) <strong>prerelease_specs</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
An array including only the prerelease gemspecs.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#refresh%21-instance_method" title="#refresh! (instance method)">- (Object) <strong>refresh!</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Replaces the gems in the source index from specifications in the
directories this source index was created from.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#released_gems-instance_method" title="#released_gems (instance method)">- (Object) <strong>released_gems</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#released_specs-instance_method" title="#released_specs (instance method)">- (Object) <strong>released_specs</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
An array including only the released gemspecs.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#remove_spec-instance_method" title="#remove_spec (instance method)">- (Object) <strong>remove_spec</strong>(full_name) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Remove a gem specification named <tt>full_name</tt>.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#search-instance_method" title="#search (instance method)">- (Object) <strong>search</strong>(gem_pattern, platform_only = false) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Search for a gem by Gem::Dependency <tt>gem_pattern</tt>.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#size-instance_method" title="#size (instance method)">- (Object) <strong>size</strong> </a>
    

    
      (also: #length)
    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#specification-instance_method" title="#specification (instance method)">- (Object) <strong>specification</strong>(full_name) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
The gem specification given a full gem spec name.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update-instance_method" title="#update (instance method)">- (Object) <strong>update</strong>(source_uri, all) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Updates this SourceIndex from <tt>source_uri</tt>.
</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="UserInteraction.html" title="Gem::UserInteraction (module)">UserInteraction</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="UserInteraction.html#methname-instance_method" title="Gem::UserInteraction#methname (method)">methname</a></span></p>

  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="DefaultUserInteraction.html" title="Gem::DefaultUserInteraction (module)">DefaultUserInteraction</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="DefaultUserInteraction.html#ui-class_method" title="Gem::DefaultUserInteraction.ui (method)">ui</a></span>, <span class='object_link'><a href="DefaultUserInteraction.html#ui-instance_method" title="Gem::DefaultUserInteraction#ui (method)">#ui</a></span>, <span class='object_link'><a href="DefaultUserInteraction.html#ui%3D-instance_method" title="Gem::DefaultUserInteraction#ui= (method)">#ui=</a></span>, <span class='object_link'><a href="DefaultUserInteraction.html#ui%3D-class_method" title="Gem::DefaultUserInteraction.ui= (method)">ui=</a></span>, <span class='object_link'><a href="DefaultUserInteraction.html#use_ui-class_method" title="Gem::DefaultUserInteraction.use_ui (method)">use_ui</a></span>, <span class='object_link'><a href="DefaultUserInteraction.html#use_ui-instance_method" title="Gem::DefaultUserInteraction#use_ui (method)">#use_ui</a></span></p>

  <div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Gem::SourceIndex (class)">SourceIndex</a></span></tt>) <strong>initialize</strong>(specifications = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Constructs a source index instance from the provided specifications, which
is a Hash of gem full names and Gem::Specifications. &#8212; TODO merge
@gems and @prerelease_gems and provide a separate method #prerelease_gems
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


124
125
126
127
128</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubygems/source_index.rb', line 124</span>

<span class='kw'>def</span> <span class='id initialize'>initialize</span><span class='lparen'>(</span><span class='id specifications'>specifications</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='ivar'>@gems</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id specifications'>specifications</span><span class='period'>.</span><span class='id each'>each</span><span class='lbrace'>{</span> <span class='op'>|</span><span class='id full_name'>full_name</span><span class='comma'>,</span> <span class='id spec'>spec</span><span class='op'>|</span> <span class='id add_spec'>add_spec</span> <span class='id spec'>spec</span> <span class='rbrace'>}</span>
  <span class='ivar'>@spec_dirs</span> <span class='op'>=</span> <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <span id="gems-instance_method"></span>
      <div class="method_details first">
  <p class="signature first" id="gems-instance_method">
  
    - (<tt>Object</tt>) <strong>gems</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
:nodoc:
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


33
34
35</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubygems/source_index.rb', line 33</span>

<span class='kw'>def</span> <span class='id gems'>gems</span>
  <span class='ivar'>@gems</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="spec_dirs=-instance_method"></span>
      <span id="spec_dirs-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="spec_dirs-instance_method">
  
    - (<tt>Object</tt>) <strong>spec_dirs</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Directories to use to refresh this SourceIndex when calling refresh!
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


38
39
40</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubygems/source_index.rb', line 38</span>

<span class='kw'>def</span> <span class='id spec_dirs'>spec_dirs</span>
  <span class='ivar'>@spec_dirs</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="from_gems_in-class_method">
  
    + (<tt>Object</tt>) <strong>from_gems_in</strong>(*spec_dirs) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Creates a new SourceIndex from the ruby format gem specifications in
<tt>spec_dirs</tt>.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


75
76
77
78
79</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubygems/source_index.rb', line 75</span>

<span class='kw'>def</span> <span class='id from_gems_in'>from_gems_in</span><span class='lparen'>(</span><span class='op'>*</span><span class='id spec_dirs'>spec_dirs</span><span class='rparen'>)</span>
  <span class='id source_index'>source_index</span> <span class='op'>=</span> <span class='id new'>new</span>
  <span class='id source_index'>source_index</span><span class='period'>.</span><span class='id spec_dirs'>spec_dirs</span> <span class='op'>=</span> <span class='id spec_dirs'>spec_dirs</span>
  <span class='id source_index'>source_index</span><span class='period'>.</span><span class='id refresh!'>refresh!</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="from_installed_gems-class_method">
  
    + (<tt>Object</tt>) <strong>from_installed_gems</strong>(*deprecated) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Factory method to construct a source index instance for a given path.
</p>
<table>
<tr><td valign="top">deprecated</td><td><p>
If supplied, from_installed_gems will act just like <tt>from_gems_in</tt>. 
This argument is deprecated and is provided just for backwards
compatibility, and should not generally be used.
</p>
</td></tr>
<tr><td valign="top">return</td><td><p>
SourceIndex instance
</p>
</td></tr>
</table>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


56
57
58
59
60
61
62</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubygems/source_index.rb', line 56</span>

<span class='kw'>def</span> <span class='id from_installed_gems'>from_installed_gems</span><span class='lparen'>(</span><span class='op'>*</span><span class='id deprecated'>deprecated</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id deprecated'>deprecated</span><span class='period'>.</span><span class='id empty?'>empty?</span>
    <span class='id from_gems_in'>from_gems_in</span><span class='lparen'>(</span><span class='op'>*</span><span class='id installed_spec_directories'>installed_spec_directories</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id from_gems_in'>from_gems_in</span><span class='lparen'>(</span><span class='op'>*</span><span class='id deprecated'>deprecated</span><span class='rparen'>)</span> <span class='comment'># HACK warn
</span>  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="installed_spec_directories-class_method">
  
    + (<tt>Object</tt>) <strong>installed_spec_directories</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns a list of directories from Gem.path that contain specifications.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


67
68
69</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubygems/source_index.rb', line 67</span>

<span class='kw'>def</span> <span class='id installed_spec_directories'>installed_spec_directories</span>
  <span class='const'>Gem</span><span class='period'>.</span><span class='id path'>path</span><span class='period'>.</span><span class='id collect'>collect</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id dir'>dir</span><span class='op'>|</span> <span class='const'>File</span><span class='period'>.</span><span class='id join'>join</span><span class='lparen'>(</span><span class='id dir'>dir</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>specifications</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="load_specification-class_method">
  
    + (<tt>Object</tt>) <strong>load_specification</strong>(file_name) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Loads a ruby-format specification from <tt>file_name</tt> and returns the
loaded spec.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubygems/source_index.rb', line 85</span>

<span class='kw'>def</span> <span class='id load_specification'>load_specification</span><span class='lparen'>(</span><span class='id file_name'>file_name</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>unless</span> <span class='id file_name'>file_name</span> <span class='kw'>and</span> <span class='const'>File</span><span class='period'>.</span><span class='id exist?'>exist?</span> <span class='id file_name'>file_name</span>

  <span class='id spec_code'>spec_code</span> <span class='op'>=</span> <span class='kw'>if</span> <span class='kw'>defined?</span> <span class='const'>Encoding</span> <span class='kw'>then</span>
                <span class='const'>File</span><span class='period'>.</span><span class='id read'>read</span> <span class='id file_name'>file_name</span><span class='comma'>,</span> <span class='symbol'>:encoding</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>UTF-8</span><span class='tstring_end'>'</span></span>
              <span class='kw'>else</span>
                <span class='const'>File</span><span class='period'>.</span><span class='id read'>read</span> <span class='id file_name'>file_name</span>
              <span class='kw'>end</span><span class='period'>.</span><span class='id untaint'>untaint</span>

  <span class='kw'>begin</span>
    <span class='id gemspec'>gemspec</span> <span class='op'>=</span> <span class='id eval'>eval</span> <span class='id spec_code'>spec_code</span><span class='comma'>,</span> <span class='id binding'>binding</span><span class='comma'>,</span> <span class='id file_name'>file_name</span>

    <span class='kw'>if</span> <span class='id gemspec'>gemspec</span><span class='period'>.</span><span class='id is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Gem</span><span class='op'>::</span><span class='const'>Specification</span><span class='rparen'>)</span>
      <span class='id gemspec'>gemspec</span><span class='period'>.</span><span class='id loaded_from'>loaded_from</span> <span class='op'>=</span> <span class='id file_name'>file_name</span>
      <span class='kw'>return</span> <span class='id gemspec'>gemspec</span>
    <span class='kw'>end</span>
    <span class='id alert_warning'>alert_warning</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>File '</span><span class='embexpr_beg'>#{</span><span class='id file_name'>file_name</span><span class='rbrace'>}</span><span class='tstring_content'>' does not evaluate to a gem specification</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>rescue</span> <span class='const'>SignalException</span><span class='comma'>,</span> <span class='const'>SystemExit</span>
    <span class='id raise'>raise</span>
  <span class='kw'>rescue</span> <span class='const'>SyntaxError</span> <span class='op'>=&gt;</span> <span class='id e'>e</span>
    <span class='id alert_warning'>alert_warning</span> <span class='id e'>e</span>
    <span class='id alert_warning'>alert_warning</span> <span class='id spec_code'>spec_code</span>
  <span class='kw'>rescue</span> <span class='const'>Exception</span> <span class='op'>=&gt;</span> <span class='id e'>e</span>
    <span class='id alert_warning'>alert_warning</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id e'>e</span><span class='period'>.</span><span class='id inspect'>inspect</span><span class='rbrace'>}</span><span class='tstring_content'>\n</span><span class='embexpr_beg'>#{</span><span class='id spec_code'>spec_code</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='id alert_warning'>alert_warning</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Invalid .gemspec format in '</span><span class='embexpr_beg'>#{</span><span class='id file_name'>file_name</span><span class='rbrace'>}</span><span class='tstring_content'>'</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='kw'>return</span> <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="==-instance_method">
  
    - (<tt>Object</tt>) <strong>==</strong>(other) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
:nodoc:
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


416
417
418</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubygems/source_index.rb', line 416</span>

<span class='kw'>def</span> <span class='op'>==</span><span class='lparen'>(</span><span class='id other'>other</span><span class='rparen'>)</span> <span class='comment'># :nodoc:
</span>  <span class='kw'>self</span><span class='period'>.</span><span class='id class'>class</span> <span class='op'>===</span> <span class='id other'>other</span> <span class='kw'>and</span> <span class='ivar'>@gems</span> <span class='op'>==</span> <span class='id other'>other</span><span class='period'>.</span><span class='id gems'>gems</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="add_spec-instance_method">
  
    - (<tt>Object</tt>) <strong>add_spec</strong>(gem_spec, name = gem_spec.full_name) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Add a gem specification to the source index.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


215
216
217
218
219</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubygems/source_index.rb', line 215</span>

<span class='kw'>def</span> <span class='id add_spec'>add_spec</span><span class='lparen'>(</span><span class='id gem_spec'>gem_spec</span><span class='comma'>,</span> <span class='id name'>name</span> <span class='op'>=</span> <span class='id gem_spec'>gem_spec</span><span class='period'>.</span><span class='id full_name'>full_name</span><span class='rparen'>)</span>
  <span class='comment'># No idea why, but the Indexer wants to insert them using original_name
</span>  <span class='comment'># instead of full_name. So we make it an optional arg.
</span>  <span class='ivar'>@gems</span><span class='lbracket'>[</span><span class='id name'>name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id gem_spec'>gem_spec</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="add_specs-instance_method">
  
    - (<tt>Object</tt>) <strong>add_specs</strong>(*gem_specs) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Add gem specifications to the source index.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


224
225
226
227
228</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubygems/source_index.rb', line 224</span>

<span class='kw'>def</span> <span class='id add_specs'>add_specs</span><span class='lparen'>(</span><span class='op'>*</span><span class='id gem_specs'>gem_specs</span><span class='rparen'>)</span>
  <span class='id gem_specs'>gem_specs</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id spec'>spec</span><span class='op'>|</span>
    <span class='id add_spec'>add_spec</span> <span class='id spec'>spec</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="all_gems-instance_method">
  
    - (<tt>Object</tt>) <strong>all_gems</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
TODO: remove method
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


131
132
133</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubygems/source_index.rb', line 131</span>

<span class='kw'>def</span> <span class='id all_gems'>all_gems</span>
  <span class='ivar'>@gems</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="dump-instance_method">
  
    - (<tt>Object</tt>) <strong>dump</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


420
421
422</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubygems/source_index.rb', line 420</span>

<span class='kw'>def</span> <span class='id dump'>dump</span>
  <span class='const'>Marshal</span><span class='period'>.</span><span class='id dump'>dump</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="each-instance_method">
  
    - (<tt>Object</tt>) <strong>each</strong>(&amp;block) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Iterate over the specifications in the source index.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


240
241
242</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubygems/source_index.rb', line 240</span>

<span class='kw'>def</span> <span class='id each'>each</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span> <span class='comment'># :yields: gem.full_name, gem
</span>  <span class='ivar'>@gems</span><span class='period'>.</span><span class='id each'>each</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="find_name-instance_method">
  
    - (<tt>Object</tt>) <strong>find_name</strong>(gem_name, version_requirement = Gem::Requirement.default) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Find a gem by an exact match on the short name.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


278
279
280
281</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubygems/source_index.rb', line 278</span>

<span class='kw'>def</span> <span class='id find_name'>find_name</span><span class='lparen'>(</span><span class='id gem_name'>gem_name</span><span class='comma'>,</span> <span class='id version_requirement'>version_requirement</span> <span class='op'>=</span> <span class='const'>Gem</span><span class='op'>::</span><span class='const'>Requirement</span><span class='period'>.</span><span class='id default'>default</span><span class='rparen'>)</span>
  <span class='id dep'>dep</span> <span class='op'>=</span> <span class='const'>Gem</span><span class='op'>::</span><span class='const'>Dependency</span><span class='period'>.</span><span class='id new'>new</span> <span class='id gem_name'>gem_name</span><span class='comma'>,</span> <span class='id version_requirement'>version_requirement</span>
  <span class='id search'>search</span> <span class='id dep'>dep</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="gem_signature-instance_method">
  
    - (<tt>Object</tt>) <strong>gem_signature</strong>(gem_full_name) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
The signature for the given gem specification.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


264
265
266
267
268</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubygems/source_index.rb', line 264</span>

<span class='kw'>def</span> <span class='id gem_signature'>gem_signature</span><span class='lparen'>(</span><span class='id gem_full_name'>gem_full_name</span><span class='rparen'>)</span>
  <span class='id require'>require</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>digest</span><span class='tstring_end'>'</span></span>

  <span class='const'>Digest</span><span class='op'>::</span><span class='const'>SHA256</span><span class='period'>.</span><span class='id new'>new</span><span class='period'>.</span><span class='id hexdigest'>hexdigest</span><span class='lparen'>(</span><span class='ivar'>@gems</span><span class='lbracket'>[</span><span class='id gem_full_name'>gem_full_name</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id to_yaml'>to_yaml</span><span class='rparen'>)</span><span class='period'>.</span><span class='id to_s'>to_s</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="index_signature-instance_method">
  
    - (<tt>Object</tt>) <strong>index_signature</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
The signature for the source index.  Changes in the signature indicate a
change in the index.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


255
256
257
258
259</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubygems/source_index.rb', line 255</span>

<span class='kw'>def</span> <span class='id index_signature'>index_signature</span>
  <span class='id require'>require</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>digest</span><span class='tstring_end'>'</span></span>

  <span class='const'>Digest</span><span class='op'>::</span><span class='const'>SHA256</span><span class='period'>.</span><span class='id new'>new</span><span class='period'>.</span><span class='id hexdigest'>hexdigest</span><span class='lparen'>(</span><span class='ivar'>@gems</span><span class='period'>.</span><span class='id keys'>keys</span><span class='period'>.</span><span class='id sort'>sort</span><span class='period'>.</span><span class='id join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>,</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id to_s'>to_s</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="latest_specs-instance_method">
  
    - (<tt>Object</tt>) <strong>latest_specs</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns an Array specifications for the latest released versions of each
gem in this index.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubygems/source_index.rb', line 165</span>

<span class='kw'>def</span> <span class='id latest_specs'>latest_specs</span>
  <span class='id result'>result</span> <span class='op'>=</span> <span class='const'>Hash</span><span class='period'>.</span><span class='id new'>new</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id h'>h</span><span class='comma'>,</span><span class='id k'>k</span><span class='op'>|</span> <span class='id h'>h</span><span class='lbracket'>[</span><span class='id k'>k</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
  <span class='id latest'>latest</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>

  <span class='id sort'>sort</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id _'>_</span><span class='comma'>,</span> <span class='id spec'>spec</span><span class='op'>|</span>
    <span class='id name'>name</span> <span class='op'>=</span> <span class='id spec'>spec</span><span class='period'>.</span><span class='id name'>name</span>
    <span class='id curr_ver'>curr_ver</span> <span class='op'>=</span> <span class='id spec'>spec</span><span class='period'>.</span><span class='id version'>version</span>
    <span class='id prev_ver'>prev_ver</span> <span class='op'>=</span> <span class='id latest'>latest</span><span class='period'>.</span><span class='id key?'>key?</span><span class='lparen'>(</span><span class='id name'>name</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id latest'>latest</span><span class='lbracket'>[</span><span class='id name'>name</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id version'>version</span> <span class='op'>:</span> <span class='kw'>nil</span>

    <span class='kw'>next</span> <span class='kw'>if</span> <span class='id curr_ver'>curr_ver</span><span class='period'>.</span><span class='id prerelease?'>prerelease?</span>
    <span class='kw'>next</span> <span class='kw'>unless</span> <span class='id prev_ver'>prev_ver</span><span class='period'>.</span><span class='id nil?'>nil?</span> <span class='kw'>or</span> <span class='id curr_ver'>curr_ver</span> <span class='op'>&gt;=</span> <span class='id prev_ver'>prev_ver</span> <span class='kw'>or</span>
                <span class='id latest'>latest</span><span class='lbracket'>[</span><span class='id name'>name</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id platform'>platform</span> <span class='op'>!=</span> <span class='const'>Gem</span><span class='op'>::</span><span class='const'>Platform</span><span class='op'>::</span><span class='const'>RUBY</span>

    <span class='kw'>if</span> <span class='id prev_ver'>prev_ver</span><span class='period'>.</span><span class='id nil?'>nil?</span> <span class='kw'>or</span>
       <span class='lparen'>(</span><span class='id curr_ver'>curr_ver</span> <span class='op'>&gt;</span> <span class='id prev_ver'>prev_ver</span> <span class='kw'>and</span> <span class='id spec'>spec</span><span class='period'>.</span><span class='id platform'>platform</span> <span class='op'>==</span> <span class='const'>Gem</span><span class='op'>::</span><span class='const'>Platform</span><span class='op'>::</span><span class='const'>RUBY</span><span class='rparen'>)</span> <span class='kw'>then</span>
      <span class='id result'>result</span><span class='lbracket'>[</span><span class='id name'>name</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id clear'>clear</span>
      <span class='id latest'>latest</span><span class='lbracket'>[</span><span class='id name'>name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id spec'>spec</span>
    <span class='kw'>end</span>

    <span class='kw'>if</span> <span class='id spec'>spec</span><span class='period'>.</span><span class='id platform'>platform</span> <span class='op'>!=</span> <span class='const'>Gem</span><span class='op'>::</span><span class='const'>Platform</span><span class='op'>::</span><span class='const'>RUBY</span> <span class='kw'>then</span>
      <span class='id result'>result</span><span class='lbracket'>[</span><span class='id name'>name</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id delete_if'>delete_if</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id result_spec'>result_spec</span><span class='op'>|</span>
        <span class='id result_spec'>result_spec</span><span class='period'>.</span><span class='id platform'>platform</span> <span class='op'>==</span> <span class='id spec'>spec</span><span class='period'>.</span><span class='id platform'>platform</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='id result'>result</span><span class='lbracket'>[</span><span class='id name'>name</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id spec'>spec</span>
  <span class='kw'>end</span>

  <span class='comment'># TODO: why is this a hash while @gems is an array? Seems like
</span>  <span class='comment'># structural similarity would be good.
</span>  <span class='id result'>result</span><span class='period'>.</span><span class='id values'>values</span><span class='period'>.</span><span class='id flatten'>flatten</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="load_gems_in-instance_method">
  
    - (<tt>Object</tt>) <strong>load_gems_in</strong>(*spec_dirs) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Reconstruct the source index from the specifications in <tt>spec_dirs</tt>.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


146
147
148
149
150
151
152
153
154
155
156
157
158
159</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubygems/source_index.rb', line 146</span>

<span class='kw'>def</span> <span class='id load_gems_in'>load_gems_in</span><span class='lparen'>(</span><span class='op'>*</span><span class='id spec_dirs'>spec_dirs</span><span class='rparen'>)</span>
  <span class='ivar'>@gems</span><span class='period'>.</span><span class='id clear'>clear</span>

  <span class='id spec_dirs'>spec_dirs</span><span class='period'>.</span><span class='id reverse_each'>reverse_each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id spec_dir'>spec_dir</span><span class='op'>|</span>
    <span class='id spec_files'>spec_files</span> <span class='op'>=</span> <span class='const'>Dir</span><span class='period'>.</span><span class='id glob'>glob</span> <span class='const'>File</span><span class='period'>.</span><span class='id join'>join</span><span class='lparen'>(</span><span class='id spec_dir'>spec_dir</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>*.gemspec</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>

    <span class='id spec_files'>spec_files</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id spec_file'>spec_file</span><span class='op'>|</span>
      <span class='id gemspec'>gemspec</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id class'>class</span><span class='period'>.</span><span class='id load_specification'>load_specification</span> <span class='id spec_file'>spec_file</span><span class='period'>.</span><span class='id untaint'>untaint</span>
      <span class='id add_spec'>add_spec</span> <span class='id gemspec'>gemspec</span> <span class='kw'>if</span> <span class='id gemspec'>gemspec</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="outdated-instance_method">
  
    - (<tt>Object</tt>) <strong>outdated</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns an Array of Gem::Specifications that are not up to date.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubygems/source_index.rb', line 351</span>

<span class='kw'>def</span> <span class='id outdated'>outdated</span>
  <span class='id outdateds'>outdateds</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>

  <span class='id latest_specs'>latest_specs</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id local'>local</span><span class='op'>|</span>
    <span class='id dependency'>dependency</span> <span class='op'>=</span> <span class='const'>Gem</span><span class='op'>::</span><span class='const'>Dependency</span><span class='period'>.</span><span class='id new'>new</span> <span class='id local'>local</span><span class='period'>.</span><span class='id name'>name</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&gt;= </span><span class='embexpr_beg'>#{</span><span class='id local'>local</span><span class='period'>.</span><span class='id version'>version</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>

    <span class='kw'>begin</span>
      <span class='id fetcher'>fetcher</span> <span class='op'>=</span> <span class='const'>Gem</span><span class='op'>::</span><span class='const'>SpecFetcher</span><span class='period'>.</span><span class='id fetcher'>fetcher</span>
      <span class='id remotes'>remotes</span> <span class='op'>=</span> <span class='id fetcher'>fetcher</span><span class='period'>.</span><span class='id find_matching'>find_matching</span> <span class='id dependency'>dependency</span>
      <span class='id remotes'>remotes</span> <span class='op'>=</span> <span class='id remotes'>remotes</span><span class='period'>.</span><span class='id map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='lparen'>(</span><span class='id name'>name</span><span class='comma'>,</span> <span class='id version'>version</span><span class='comma'>,</span><span class='id _'>_</span><span class='rparen'>)</span><span class='comma'>,</span><span class='id _'>_</span><span class='op'>|</span> <span class='id version'>version</span> <span class='rbrace'>}</span>
    <span class='kw'>rescue</span> <span class='const'>Gem</span><span class='op'>::</span><span class='const'>RemoteFetcher</span><span class='op'>::</span><span class='const'>FetchError</span> <span class='op'>=&gt;</span> <span class='id e'>e</span>
      <span class='id raise'>raise</span> <span class='kw'>unless</span> <span class='id fetcher'>fetcher</span><span class='period'>.</span><span class='id warn_legacy'>warn_legacy</span> <span class='id e'>e</span> <span class='kw'>do</span>
        <span class='id require'>require</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>rubygems/source_info_cache</span><span class='tstring_end'>'</span></span>

        <span class='id specs'>specs</span> <span class='op'>=</span> <span class='const'>Gem</span><span class='op'>::</span><span class='const'>SourceInfoCache</span><span class='period'>.</span><span class='id search_with_source'>search_with_source</span> <span class='id dependency'>dependency</span><span class='comma'>,</span> <span class='kw'>true</span>

        <span class='id remotes'>remotes</span> <span class='op'>=</span> <span class='id specs'>specs</span><span class='period'>.</span><span class='id map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id spec'>spec</span><span class='comma'>,</span><span class='op'>|</span> <span class='id spec'>spec</span><span class='period'>.</span><span class='id version'>version</span> <span class='rbrace'>}</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='id latest'>latest</span> <span class='op'>=</span> <span class='id remotes'>remotes</span><span class='period'>.</span><span class='id sort'>sort</span><span class='period'>.</span><span class='id last'>last</span>

    <span class='id outdateds'>outdateds</span> <span class='op'>&lt;&lt;</span> <span class='id local'>local</span><span class='period'>.</span><span class='id name'>name</span> <span class='kw'>if</span> <span class='id latest'>latest</span> <span class='kw'>and</span> <span class='id local'>local</span><span class='period'>.</span><span class='id version'>version</span> <span class='op'>&lt;</span> <span class='id latest'>latest</span>
  <span class='kw'>end</span>

  <span class='id outdateds'>outdateds</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="prerelease_gems-instance_method">
  
    - (<tt>Object</tt>) <strong>prerelease_gems</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


135
136
137</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubygems/source_index.rb', line 135</span>

<span class='kw'>def</span> <span class='id prerelease_gems'>prerelease_gems</span>
  <span class='ivar'>@gems</span><span class='period'>.</span><span class='id reject'>reject</span><span class='lbrace'>{</span> <span class='op'>|</span><span class='id name'>name</span><span class='comma'>,</span> <span class='id gem'>gem</span><span class='op'>|</span> <span class='op'>!</span><span class='id gem'>gem</span><span class='period'>.</span><span class='id version'>version</span><span class='period'>.</span><span class='id prerelease?'>prerelease?</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="prerelease_specs-instance_method">
  
    - (<tt>Object</tt>) <strong>prerelease_specs</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
An array including only the prerelease gemspecs
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


201
202
203</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubygems/source_index.rb', line 201</span>

<span class='kw'>def</span> <span class='id prerelease_specs'>prerelease_specs</span>
  <span class='id prerelease_gems'>prerelease_gems</span><span class='period'>.</span><span class='id values'>values</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="refresh!-instance_method">
  
    - (<tt>Object</tt>) <strong>refresh!</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Replaces the gems in the source index from specifications in the
directories this source index was created from.  Raises an exception if
this source index wasn&#8217;t created from a directory (via from_gems_in
or from_installed_gems, or having spec_dirs set).
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


343
344
345
346</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubygems/source_index.rb', line 343</span>

<span class='kw'>def</span> <span class='id refresh!'>refresh!</span>
  <span class='id raise'>raise</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>source index not created from disk</span><span class='tstring_end'>'</span></span> <span class='kw'>if</span> <span class='ivar'>@spec_dirs</span><span class='period'>.</span><span class='id nil?'>nil?</span>
  <span class='id load_gems_in'>load_gems_in</span><span class='lparen'>(</span><span class='op'>*</span><span class='ivar'>@spec_dirs</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="released_gems-instance_method">
  
    - (<tt>Object</tt>) <strong>released_gems</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


139
140
141</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubygems/source_index.rb', line 139</span>

<span class='kw'>def</span> <span class='id released_gems'>released_gems</span>
  <span class='ivar'>@gems</span><span class='period'>.</span><span class='id reject'>reject</span><span class='lbrace'>{</span> <span class='op'>|</span><span class='id name'>name</span><span class='comma'>,</span> <span class='id gem'>gem</span><span class='op'>|</span> <span class='id gem'>gem</span><span class='period'>.</span><span class='id version'>version</span><span class='period'>.</span><span class='id prerelease?'>prerelease?</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="released_specs-instance_method">
  
    - (<tt>Object</tt>) <strong>released_specs</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
An array including only the released gemspecs
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


208
209
210</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubygems/source_index.rb', line 208</span>

<span class='kw'>def</span> <span class='id released_specs'>released_specs</span>
  <span class='id released_gems'>released_gems</span><span class='period'>.</span><span class='id values'>values</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="remove_spec-instance_method">
  
    - (<tt>Object</tt>) <strong>remove_spec</strong>(full_name) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Remove a gem specification named <tt>full_name</tt>.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


233
234
235</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubygems/source_index.rb', line 233</span>

<span class='kw'>def</span> <span class='id remove_spec'>remove_spec</span><span class='lparen'>(</span><span class='id full_name'>full_name</span><span class='rparen'>)</span>
  <span class='ivar'>@gems</span><span class='period'>.</span><span class='id delete'>delete</span> <span class='id full_name'>full_name</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="search-instance_method">
  
    - (<tt>Object</tt>) <strong>search</strong>(gem_pattern, platform_only = false) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Search for a gem by Gem::Dependency <tt>gem_pattern</tt>.  If
<tt>only_platform</tt> is true, only gems matching Gem::Platform.local will
be returned.  An Array of matching Gem::Specification objects is returned.
</p>
<p>
For backwards compatibility, a String or Regexp pattern may be passed as
<tt>gem_pattern</tt>, and a Gem::Requirement for <tt>platform_only</tt>. 
This behavior is deprecated and will be removed.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubygems/source_index.rb', line 292</span>

<span class='kw'>def</span> <span class='id search'>search</span><span class='lparen'>(</span><span class='id gem_pattern'>gem_pattern</span><span class='comma'>,</span> <span class='id platform_only'>platform_only</span> <span class='op'>=</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='id version_requirement'>version_requirement</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='id only_platform'>only_platform</span> <span class='op'>=</span> <span class='kw'>false</span>

  <span class='comment'># TODO - Remove support and warning for legacy arguments after 2008/11
</span>  <span class='kw'>unless</span> <span class='const'>Gem</span><span class='op'>::</span><span class='const'>Dependency</span> <span class='op'>===</span> <span class='id gem_pattern'>gem_pattern</span>
    <span class='id warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'>Gem</span><span class='period'>.</span><span class='id location_of_caller'>location_of_caller</span><span class='period'>.</span><span class='id join'>join</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>:</span><span class='tstring_end'>'</span></span><span class='rbrace'>}</span><span class='tstring_content'>:Warning: Gem::SourceIndex#search support for </span><span class='embexpr_beg'>#{</span><span class='id gem_pattern'>gem_pattern</span><span class='period'>.</span><span class='id class'>class</span><span class='rbrace'>}</span><span class='tstring_content'> patterns is deprecated, use #find_name</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='kw'>case</span> <span class='id gem_pattern'>gem_pattern</span>
  <span class='kw'>when</span> <span class='const'>Regexp</span> <span class='kw'>then</span>
    <span class='id version_requirement'>version_requirement</span> <span class='op'>=</span> <span class='id platform_only'>platform_only</span> <span class='op'>||</span> <span class='const'>Gem</span><span class='op'>::</span><span class='const'>Requirement</span><span class='period'>.</span><span class='id default'>default</span>
  <span class='kw'>when</span> <span class='const'>Gem</span><span class='op'>::</span><span class='const'>Dependency</span> <span class='kw'>then</span>
    <span class='id only_platform'>only_platform</span> <span class='op'>=</span> <span class='id platform_only'>platform_only</span>
    <span class='id version_requirement'>version_requirement</span> <span class='op'>=</span> <span class='id gem_pattern'>gem_pattern</span><span class='period'>.</span><span class='id requirement'>requirement</span>
    <span class='id gem_pattern'>gem_pattern</span> <span class='op'>=</span> <span class='kw'>if</span> <span class='const'>Regexp</span> <span class='op'>===</span> <span class='id gem_pattern'>gem_pattern</span><span class='period'>.</span><span class='id name'>name</span> <span class='kw'>then</span>
                    <span class='id gem_pattern'>gem_pattern</span><span class='period'>.</span><span class='id name'>name</span>
                  <span class='kw'>elsif</span> <span class='id gem_pattern'>gem_pattern</span><span class='period'>.</span><span class='id name'>name</span><span class='period'>.</span><span class='id empty?'>empty?</span> <span class='kw'>then</span>
                    <span class='tstring'><span class='regexp_beg'>/</span><span class='regexp_end'>/</span></span>
                  <span class='kw'>else</span>
                    <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^</span><span class='embexpr_beg'>#{</span><span class='const'>Regexp</span><span class='period'>.</span><span class='id escape'>escape</span> <span class='id gem_pattern'>gem_pattern</span><span class='period'>.</span><span class='id name'>name</span><span class='rbrace'>}</span><span class='tstring_content'>$</span><span class='regexp_end'>/</span></span>
                  <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='id version_requirement'>version_requirement</span> <span class='op'>=</span> <span class='id platform_only'>platform_only</span> <span class='op'>||</span> <span class='const'>Gem</span><span class='op'>::</span><span class='const'>Requirement</span><span class='period'>.</span><span class='id default'>default</span>
    <span class='id gem_pattern'>gem_pattern</span> <span class='op'>=</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='embexpr_beg'>#{</span><span class='id gem_pattern'>gem_pattern</span><span class='rbrace'>}</span><span class='regexp_end'>/i</span></span>
  <span class='kw'>end</span>

  <span class='kw'>unless</span> <span class='const'>Gem</span><span class='op'>::</span><span class='const'>Requirement</span> <span class='op'>===</span> <span class='id version_requirement'>version_requirement</span> <span class='kw'>then</span>
    <span class='id version_requirement'>version_requirement</span> <span class='op'>=</span> <span class='const'>Gem</span><span class='op'>::</span><span class='const'>Requirement</span><span class='period'>.</span><span class='id create'>create</span> <span class='id version_requirement'>version_requirement</span>
  <span class='kw'>end</span>

  <span class='id specs'>specs</span> <span class='op'>=</span> <span class='id all_gems'>all_gems</span><span class='period'>.</span><span class='id values'>values</span><span class='period'>.</span><span class='id select'>select</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id spec'>spec</span><span class='op'>|</span>
    <span class='id spec'>spec</span><span class='period'>.</span><span class='id name'>name</span> <span class='op'>=~</span> <span class='id gem_pattern'>gem_pattern</span> <span class='kw'>and</span>
      <span class='id version_requirement'>version_requirement</span><span class='period'>.</span><span class='id satisfied_by?'>satisfied_by?</span> <span class='id spec'>spec</span><span class='period'>.</span><span class='id version'>version</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id only_platform'>only_platform</span> <span class='kw'>then</span>
    <span class='id specs'>specs</span> <span class='op'>=</span> <span class='id specs'>specs</span><span class='period'>.</span><span class='id select'>select</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id spec'>spec</span><span class='op'>|</span>
      <span class='const'>Gem</span><span class='op'>::</span><span class='const'>Platform</span><span class='period'>.</span><span class='id match'>match</span> <span class='id spec'>spec</span><span class='period'>.</span><span class='id platform'>platform</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id specs'>specs</span><span class='period'>.</span><span class='id sort_by'>sort_by</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id s'>s</span><span class='op'>|</span> <span class='id s'>s</span><span class='period'>.</span><span class='id sort_obj'>sort_obj</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="size-instance_method">
  
    - (<tt>Object</tt>) <strong>size</strong> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='length-instance_method'>length</span></span>
    </span>
  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


270
271
272</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubygems/source_index.rb', line 270</span>

<span class='kw'>def</span> <span class='id size'>size</span>
  <span class='ivar'>@gems</span><span class='period'>.</span><span class='id size'>size</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="specification-instance_method">
  
    - (<tt>Object</tt>) <strong>specification</strong>(full_name) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
The gem specification given a full gem spec name.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


247
248
249</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubygems/source_index.rb', line 247</span>

<span class='kw'>def</span> <span class='id specification'>specification</span><span class='lparen'>(</span><span class='id full_name'>full_name</span><span class='rparen'>)</span>
  <span class='ivar'>@gems</span><span class='lbracket'>[</span><span class='id full_name'>full_name</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="update-instance_method">
  
    - (<tt>Object</tt>) <strong>update</strong>(source_uri, all) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Updates this SourceIndex from <tt>source_uri</tt>.  If <tt>all</tt> is
false, only the latest gems are fetched.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rubygems/source_index.rb', line 383</span>

<span class='kw'>def</span> <span class='id update'>update</span><span class='lparen'>(</span><span class='id source_uri'>source_uri</span><span class='comma'>,</span> <span class='id all'>all</span><span class='rparen'>)</span>
  <span class='id source_uri'>source_uri</span> <span class='op'>=</span> <span class='const'>URI</span><span class='period'>.</span><span class='id parse'>parse</span> <span class='id source_uri'>source_uri</span> <span class='kw'>unless</span> <span class='const'>URI</span><span class='op'>::</span><span class='const'>Generic</span> <span class='op'>===</span> <span class='id source_uri'>source_uri</span>
  <span class='id source_uri'>source_uri</span><span class='period'>.</span><span class='id path'>path</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/</span><span class='tstring_end'>'</span></span> <span class='kw'>unless</span> <span class='id source_uri'>source_uri</span><span class='period'>.</span><span class='id path'>path</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\/$</span><span class='regexp_end'>/</span></span>

  <span class='id use_incremental'>use_incremental</span> <span class='op'>=</span> <span class='kw'>false</span>

  <span class='kw'>begin</span>
    <span class='id gem_names'>gem_names</span> <span class='op'>=</span> <span class='id fetch_quick_index'>fetch_quick_index</span> <span class='id source_uri'>source_uri</span><span class='comma'>,</span> <span class='id all'>all</span>
    <span class='id remove_extra'>remove_extra</span> <span class='id gem_names'>gem_names</span>
    <span class='id missing_gems'>missing_gems</span> <span class='op'>=</span> <span class='id find_missing'>find_missing</span> <span class='id gem_names'>gem_names</span>

    <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>if</span> <span class='id missing_gems'>missing_gems</span><span class='period'>.</span><span class='id size'>size</span><span class='period'>.</span><span class='id zero?'>zero?</span>

    <span class='id say'>say</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Missing metadata for </span><span class='embexpr_beg'>#{</span><span class='id missing_gems'>missing_gems</span><span class='period'>.</span><span class='id size'>size</span><span class='rbrace'>}</span><span class='tstring_content'> gems</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span>
    <span class='id missing_gems'>missing_gems</span><span class='period'>.</span><span class='id size'>size</span> <span class='op'>&gt;</span> <span class='int'>0</span> <span class='kw'>and</span> <span class='const'>Gem</span><span class='period'>.</span><span class='id configuration'>configuration</span><span class='period'>.</span><span class='id really_verbose'>really_verbose</span>

    <span class='id use_incremental'>use_incremental</span> <span class='op'>=</span> <span class='id missing_gems'>missing_gems</span><span class='period'>.</span><span class='id size'>size</span> <span class='op'>&lt;=</span> <span class='const'>Gem</span><span class='period'>.</span><span class='id configuration'>configuration</span><span class='period'>.</span><span class='id bulk_threshold'>bulk_threshold</span>
  <span class='kw'>rescue</span> <span class='const'>Gem</span><span class='op'>::</span><span class='const'>OperationNotSupportedError</span> <span class='op'>=&gt;</span> <span class='id ex'>ex</span>
    <span class='id alert_error'>alert_error</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Falling back to bulk fetch: </span><span class='embexpr_beg'>#{</span><span class='id ex'>ex</span><span class='period'>.</span><span class='id message'>message</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span>
    <span class='const'>Gem</span><span class='period'>.</span><span class='id configuration'>configuration</span><span class='period'>.</span><span class='id really_verbose'>really_verbose</span>
    <span class='id use_incremental'>use_incremental</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id use_incremental'>use_incremental</span> <span class='kw'>then</span>
    <span class='id update_with_missing'>update_with_missing</span><span class='lparen'>(</span><span class='id source_uri'>source_uri</span><span class='comma'>,</span> <span class='id missing_gems'>missing_gems</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id new_index'>new_index</span> <span class='op'>=</span> <span class='id fetch_bulk_index'>fetch_bulk_index</span><span class='lparen'>(</span><span class='id source_uri'>source_uri</span><span class='rparen'>)</span>
    <span class='ivar'>@gems</span><span class='period'>.</span><span class='id replace'>replace</span><span class='lparen'>(</span><span class='id new_index'>new_index</span><span class='period'>.</span><span class='id gems'>gems</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Mon May 16 15:53:35 2011 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.6.8 (ruby-1.9.2).
</div>

  </body>
</html>